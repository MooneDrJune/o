<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>WebSocketStream Demo</title>
    <script>
      if (location.protocol !== 'https:') {
        location.protocol = 'https:'
      }
    </script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A cool thing made with Glitch">
    <link id="favicon" rel="icon" href="https://glitch.com/edit/favicon-app.ico" type="image/x-icon">
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js" defer></script>
  </head>
  <body>
    <h1>Wikipedia Edits</h1>    
    <p>
      This demo reads from a WebSocket stream of
      <a href="https://en.wikipedia.org/wiki/Help:Recent_changes">Wikipedia Recent Changes</a>
      and, after a <em>fake processing step that takes one second</em>, echos the result back to another WebSocket server.
    </p>
    <p>
      Open the DevTools of your browser to see the in- and outgoing WebSocket traffic.
      On Chrome, you can filter the Network tab to
      <a href="https://umaar.com/dev-tips/193-websocket-viewer/">just show WebSocket</a> data.
    </p>
    
    <h2>WebSocketStream</h2>
    <p>
      This part of the demo <em>reads</em> from a <code>WebSocketStream</code> of recent Wikipedia changes
      and <em>writes</em> each message back to a different echo <code>WebSocketStream</code>.      
    </p>
    <p>
      ✅ Backpressure is applied to both read and write operations.
      The next message is only read once the pipeline is ready.
    </p>
    <ol class="new" reverse></ol>
    
    <h2>WebSocket</h2>
    <p>
      This part of the demo <em>reads</em> from a regular <code>WebSocket</code> of recent Wikipedia changes
      and <em>writes</em> each message back to a different echo <code>WebSocket</code>.
    </p>
    <p>
      ❌ No backpressure is applied. In the worst case, the render process will either fill up memory
      by buffering those messages, become unresponsive due to 100% CPU usage, or both.
    </p>    
    <ol class="old" reverse></ol>
  </body>
</html>
